default:
    @just --list

fmt:
    ruff check --select I --fix
    ruff format
    zig fmt .

lint:
    ruff check
    ty check
    zig fmt --check .
    fd -e zig | zlint --stdin

build:
    zig fetch --save ../../
    alloconda build

test:
    pytest -v tests/

bench:
    pytest -v benchmarks/bench_*.py --benchmark-only \
      --benchmark-sort=name --benchmark-group-by=func \
      --benchmark-columns=mean,stddev,median,ops

bench-dataclass:
    pytest -v benchmarks/bench_encoding.py -k dataclass --benchmark-only \
      --benchmark-min-rounds=100 --benchmark-warmup=on --benchmark-disable-gc

clean:
    rm -rf *.egg-info .benchmarks
