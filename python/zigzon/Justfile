default:
    @just --list

fmt:
    ruff check --select I --fix
    ruff format
    zig fmt .

lint:
    zig fmt --check .
    zlint
    ruff check
    ty check

build:
    alloconda build

wheel:
    rm -rf dist
    alloconda wheel-all
    alloconda inspect-lib zig-out/lib/*
    alloconda inspect --verify dist/*.whl

e2e: wheel
    ./scripts/smoke-wheel.sh dist/*.whl

test:
    pytest -v tests

clean:
    rm -rf zig-out
    rm -rf dist
    rm -f zigzon/*.so
